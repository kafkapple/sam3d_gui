# SAM 3D GUI - 통합 모델 체크포인트 설정
# Hydra 기반 configuration
#
# 체크포인트 통합 구조 (2025-11-26 정리):
# project_root/
# ├── checkpoints/           # 모든 모델 체크포인트 통합
# │   ├── sam2/              # SAM2 체크포인트
# │   │   └── sam2_hiera_large.pt
# │   └── sam3d/             # SAM3D 체크포인트 (HuggingFace clone)
# │       ├── pipeline.yaml
# │       ├── slat_*.ckpt
# │       └── ss_*.ckpt
# └── external/              # 소스코드만 (체크포인트 X)
#     └── sam-3d-objects/    # Python 패키지 (git submodule)

# SAM 2 설정 (Interactive segmentation)
sam2:
  name: "SAM 2 Hiera Large"
  # 프로젝트 루트 기준 상대 경로 (다중 서버 지원)
  # setup 스크립트가 checkpoints/sam2/에 다운로드
  checkpoint: "checkpoints/sam2/sam2_hiera_large.pt"
  config: "sam2_hiera_l.yaml"
  device: "auto"  # "auto" (GPU 자동 감지), "cuda", "cpu"

  # Note: SAM 2.0 Hiera Large 사용
  # setup_system_cuda.sh에서 자동 다운로드됨
  # 상대 경로로 모든 서버 지원

# SAM 3D 설정 (3D reconstruction)
sam3d:
  name: "SAM 3D Objects"
  # 기본 경로: 프로젝트 checkpoints/ 통합 디렉토리
  checkpoint_dir: "checkpoints/sam3d"
  # 대체 경로: standalone 설치 (절대 경로 fallback)
  checkpoint_dir_alt: "${oc.env:HOME}/sam-3d-objects/checkpoints/hf"

  # 다운로드 안내
  download_url: "https://huggingface.co/facebook/sam-3d-objects"
  download_command: "./download_checkpoints.sh"

# 데이터 경로 설정
data:
  # 프로젝트 루트 밖 (한 단계 상위) 상대 경로로 다중 서버 지원
  default_dir: "../data/markerless_mouse/"
  # 프로젝트 루트 내부 출력 디렉토리
  output_dir: "outputs/"

# 추론 설정
inference:
  sam2:
    multimask_output: true
    stability_score_thresh: 0.95

  sam3d:
    compile: false
    device: "cuda"

# 시각화 설정
visualization:
  foreground_color: [0, 255, 0]  # Green
  background_color: [255, 0, 0]  # Red
  point_size: 5
  point_border: 2
  mask_alpha: 0.4

# 데이터 증강 설정
augmentation:
  # 배경 이미지 폴더 (절대 경로)
  background_folder: "${oc.env:HOME}/dev/data/images/background"
  # 배경 이미지 사용 기본 비율 (0.0 ~ 1.0)
  default_bg_image_ratio: 0.5
  # 기본 채우기 색상 (white, black)
  default_fill_color: "white"
  # 경계 잘림 방지 기본값
  prevent_clipping: true
